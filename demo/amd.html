<!doctype html>
<html>
    <head></head>
    <body>
        <script src="../bower_components/requirejs/require.js"></script>
        <script>
            require.config({
                baseUrl: "../dist",
                waitSeconds: 15,

                paths: {
                    "httpinvoke": "../bower_components/httpinvoke/httpinvoke-browser",
                    "ua-parser": "../bower_components/ua-parser-js/dist/ua-parser.min"
                }
            });

            require(['plex'], function(Plex){
                window.plex = Plex;

                // Cloud
                if(typeof localStorage.client_identifier !== 'undefined' && localStorage.client_identifier !== null) {
                    window.plex.cloud.client_identifier = localStorage.client_identifier;
                }

                if(typeof localStorage.token !== 'undefined' && localStorage.token !== null) {
                    window.plex.cloud.token = localStorage.token;
                }

                // Server
                if(typeof localStorage.server_uri !== 'undefined' && localStorage.server_uri !== null) {
                    window.server = new Plex.Server(localStorage.server_uri);
                }

                if(typeof localStorage.server_token !== 'undefined' && localStorage.server_token !== null) {
                    window.server.token = localStorage.server_token;
                }
            });
        </script>
    </body>
</html>