!function(t,e){"function"==typeof define?define(e):"object"==typeof exports?module.exports=e():t.when=e()}(this,function(){var t,e,n;return function(r){function o(t,e){return g.call(t,e)}function i(t,e){var n,r,o,i,u,c,f,s,a,l,h,p=e&&e.split("/"),d=b.map,y=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),t=t.split("/"),u=t.length-1,b.nodeIdCompat&&w.test(t[u])&&(t[u]=t[u].replace(w,"")),t=p.concat(t),a=0;a<t.length;a+=1)if(h=t[a],"."===h)t.splice(a,1),a-=1;else if(".."===h){if(1===a&&(".."===t[2]||".."===t[0]))break;a>0&&(t.splice(a-1,2),a-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||y)&&d){for(n=t.split("/"),a=n.length;a>0;a-=1){if(r=n.slice(0,a).join("/"),p)for(l=p.length;l>0;l-=1)if(o=d[p.slice(0,l).join("/")],o&&(o=o[r])){i=o,c=a;break}if(i)break;!f&&y&&y[r]&&(f=y[r],s=a)}!i&&f&&(i=f,c=s),i&&(n.splice(0,c,i),t=n.join("/"))}return t}function u(t,e){return function(){return p.apply(r,j.call(arguments,0).concat([t,e]))}}function c(t){return function(e){return i(e,t)}}function f(t){return function(e){v[t]=e}}function s(t){if(o(m,t)){var e=m[t];delete m[t],_[t]=!0,h.apply(r,e)}if(!o(v,t)&&!o(_,t))throw new Error("No "+t);return v[t]}function a(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return b&&b.config&&b.config[t]||{}}}var h,p,d,y,v={},m={},b={},_={},g=Object.prototype.hasOwnProperty,j=[].slice,w=/\.js$/;d=function(t,e){var n,r=a(t),o=r[0];return t=r[1],o&&(o=i(o,e),n=s(o)),o?t=n&&n.normalize?n.normalize(t,c(e)):i(t,e):(t=i(t,e),r=a(t),o=r[0],t=r[1],o&&(n=s(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:n}},y={require:function(t){return u(t)},exports:function(t){var e=v[t];return"undefined"!=typeof e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:l(t)}}},h=function(t,e,n,i){var c,a,l,h,p,b,g=[],j=typeof n;if(i=i||t,"undefined"===j||"function"===j){for(e=!e.length&&n.length?["require","exports","module"]:e,p=0;p<e.length;p+=1)if(h=d(e[p],i),a=h.f,"require"===a)g[p]=y.require(t);else if("exports"===a)g[p]=y.exports(t),b=!0;else if("module"===a)c=g[p]=y.module(t);else if(o(v,a)||o(m,a)||o(_,a))g[p]=s(a);else{if(!h.p)throw new Error(t+" missing "+a);h.p.load(h.n,u(i,!0),f(a),{}),g[p]=v[a]}l=n?n.apply(v[t],g):void 0,t&&(c&&c.exports!==r&&c.exports!==v[t]?v[t]=c.exports:l===r&&b||(v[t]=l))}else t&&(v[t]=n)},t=e=p=function(t,e,n,o,i){if("string"==typeof t)return y[t]?y[t](e):s(d(t,e).f);if(!t.splice){if(b=t,b.deps&&p(b.deps,b.callback),!e)return;e.splice?(t=e,e=n,n=null):t=r}return e=e||function(){},"function"==typeof n&&(n=o,o=i),o?h(r,t,e,n):setTimeout(function(){h(r,t,e,n)},4),p},p.config=function(t){return p(t)},t._defined=v,n=function(t,e,n){e.splice||(n=e,e=[]),o(v,t)||o(m,t)||(m[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("../../../../bower_components/almond/almond.js",function(){}),function(t){"use strict";t("lib/env",["require"],function(t){function e(){return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)}function n(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function r(t){function e(){var t=n;n=void 0,t()}var n,r=document.createTextNode(""),o=new t(e);o.observe(r,{characterData:!0});var i=0;return function(t){n=t,r.data=i^=1}}var o,i="undefined"!=typeof setTimeout&&setTimeout,u=function(t,e){return setTimeout(t,e)},c=function(t){return clearTimeout(t)},f=function(t){return i(t,0)};if(e())f=function(t){return process.nextTick(t)};else if(o=n())f=r(o);else if(!i){var s=t,a=s("vertx");u=function(t,e){return a.setTimer(e,t)},c=a.cancelTimer,f=a.runOnLoop||a.runOnContext}return{setTimer:u,clearTimer:c,asap:f}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t(e)}),function(t){"use strict";t("lib/TimeoutError",[],function(){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/decorators/timed",["require","../env","../TimeoutError"],function(t){function e(t,e,r,o){return n.setTimer(function(){t(r,o,e)},e)}var n=t("../env"),r=t("../TimeoutError");return function(t){function o(t,n,r){e(i,t,n,r)}function i(t,e){e.resolve(t)}function u(t,e,n){var o="undefined"==typeof t?new r("timed out after "+n+"ms"):t;e.reject(o)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(o,t,void 0,e._handler),e},t.prototype.timeout=function(t,r){var o=this._beget(),i=o._handler,c=e(u,t,r,o._handler);return this._handler.visit(i,function(t){n.clearTimer(c),this.resolve(t)},function(t){n.clearTimer(c),this.reject(t)},i.notify),o},t}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t(e)}),function(t){"use strict";t("lib/state",[],function(){function t(){return{state:"pending"}}function e(t){return{state:"rejected",reason:t}}function n(t){return{state:"fulfilled",value:t}}function r(r){var o=r.state();return 0===o?t():o>0?n(r.value):e(r.value)}return{pending:t,fulfilled:n,rejected:e,inspect:r}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/apply",[],function(){function t(t,n){function r(e,r,i){var u=t._defer(),c=i.length,f=new Array(c);return o({f:e,thisArg:r,args:i,params:f,i:c-1,call:n},u._handler),u}function o(e,r){if(e.i<0)return n(e.f,e.thisArg,e.params,r);var o=t._handler(e.args[e.i]);o.fold(i,e,void 0,r)}function i(t,e,n){t.params[t.i]=e,t.i-=1,o(t,n)}return arguments.length<2&&(n=e),r}function e(t,e,n,r){try{r.resolve(t.apply(e,n))}catch(o){r.reject(o)}}return t.tryCatchResolve=e,t})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/decorators/array",["require","../state","../apply"],function(t){var e=t("../state"),n=t("../apply");return function(t){function r(e){function n(t){a=null,this.resolve(t)}function r(t){this.resolved||(a.push(t),0===--s&&this.reject(a))}for(var o,i,u=t._defer(),c=u._handler,f=e.length>>>0,s=f,a=[],l=0;f>l;++l)if(i=e[l],void 0!==i||l in e){if(o=t._handler(i),o.state()>0){c.become(o),t._visitRemaining(e,l,o);break}o.visit(c,n,r)}else--s;return 0===s&&c.reject(new RangeError("any(): array must not be empty")),u}function o(e,n){function r(t){this.resolved||(a.push(t),0===--p&&(l=null,this.resolve(a)))}function o(t){this.resolved||(l.push(t),0===--i&&(a=null,this.reject(l)))}var i,u,c,f=t._defer(),s=f._handler,a=[],l=[],h=e.length>>>0,p=0;for(c=0;h>c;++c)u=e[c],(void 0!==u||c in e)&&++p;for(n=Math.max(n,0),i=p-n+1,p=Math.min(n,p),n>p?s.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+p)):0===p&&s.resolve(a),c=0;h>c;++c)u=e[c],(void 0!==u||c in e)&&t._handler(u).visit(s,r,o,s.notify);return f}function i(e,n){return t._traverse(n,e)}function u(e,n){var r=b.call(e);return t._traverse(n,r).then(function(t){return c(r,t)})}function c(e,n){for(var r=n.length,o=new Array(r),i=0,u=0;r>i;++i)n[i]&&(o[u++]=t._handler(e[i]).value);return o.length=u,o}function f(t){return y(t.map(s))}function s(n){var r=t._handler(n);return 0===r.state()?d(n).then(e.fulfilled,e.rejected):(r._unreport(),e.inspect(r))}function a(t,e){return arguments.length>2?v.call(t,h(e),arguments[2]):v.call(t,h(e))}function l(t,e){return arguments.length>2?m.call(t,h(e),arguments[2]):m.call(t,h(e))}function h(t){return function(e,n,r){return p(t,void 0,[e,n,r])}}var p=n(t),d=t.resolve,y=t.all,v=Array.prototype.reduce,m=Array.prototype.reduceRight,b=Array.prototype.slice;return t.any=r,t.some=o,t.settle=f,t.map=i,t.filter=u,t.reduce=a,t.reduceRight=l,t.prototype.spread=function(t){return this.then(y).then(function(e){return t.apply(this,e)})},t}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t(e)}),function(t){"use strict";t("lib/decorators/flow",[],function(){function t(){throw new TypeError("catch predicate must be a function")}function e(t,e){return n(e)?t instanceof e:e(t)}function n(t){return t===Error||null!=t&&t.prototype instanceof Error}function r(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function o(t){return t}return function(n){function i(t,n){return function(r){return e(r,n)?t.call(this,r):s(r)}}function u(t,e,n,o){var i=t.call(e);return r(i)?c(i,n,o):n(o)}function c(t,e,n){return f(t).then(function(){return e(n)})}var f=n.resolve,s=n.reject,a=n.prototype["catch"];return n.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},n.prototype["catch"]=n.prototype.otherwise=function(e){return arguments.length<2?a.call(this,e):"function"!=typeof e?this.ensure(t):a.call(this,i(arguments[1],e))},n.prototype["finally"]=n.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(e){return u(t,this,o,e)},function(e){return u(t,this,s,e)})},n.prototype["else"]=n.prototype.orElse=function(t){return this.then(void 0,function(){return t})},n.prototype["yield"]=function(t){return this.then(function(){return t})},n.prototype.tap=function(t){return this.then(t)["yield"](this)},n}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/decorators/fold",[],function(){return function(t){return t.prototype.fold=function(e,n){var r=this._beget();return this._handler.fold(function(n,r,o){t._handler(n).fold(function(t,n,r){r.resolve(e.call(this,n,t))},r,this,o)},n,r._handler.receiver,r._handler),r},t}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/decorators/inspect",["require","../state"],function(t){var e=t("../state").inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t(e)}),function(t){"use strict";t("lib/decorators/iterate",[],function(){return function(t){function e(t,e,r,o){return n(function(e){return[e,t(e)]},e,r,o)}function n(t,e,o,i){function u(i,u){return r(o(i)).then(function(){return n(t,e,o,u)})}return r(i).then(function(n){return r(e(n)).then(function(e){return e?n:r(t(n)).spread(u)})})}var r=t.resolve;return t.iterate=e,t.unfold=n,t}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/decorators/progress",[],function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/decorators/with",[],function(){return function(t){return t.prototype["with"]=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/format",[],function(){function t(t){var n="object"==typeof t&&null!==t&&t.stack?t.stack:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"}function e(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=n(t,e)),e}function n(t,e){try{return JSON.stringify(t)}catch(n){return e}}return{formatError:t,formatObject:e,tryStringify:n}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/decorators/unhandledRejection",["require","../env","../format"],function(t){function e(t){throw t}function n(){}var r=t("../env").setTimer,o=t("../format");return function(t){function i(t){t.handled||(p.push(t),a("Potentially unhandled rejection ["+t.id+"] "+o.formatError(t.value)))}function u(t){var e=p.indexOf(t);e>=0&&(p.splice(e,1),l("Handled previous rejection ["+t.id+"] "+o.formatObject(t.value)))}function c(t,e){h.push(t,e),null===d&&(d=r(f,0))}function f(){for(d=null;h.length>0;)h.shift()(h.shift())}var s,a=n,l=n;"undefined"!=typeof console&&(s=console,a="undefined"!=typeof s.error?function(t){s.error(t)}:function(t){s.log(t)},l="undefined"!=typeof s.info?function(t){s.info(t)}:function(t){s.log(t)}),t.onPotentiallyUnhandledRejection=function(t){c(i,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){c(u,t)},t.onFatalRejection=function(t){c(e,t.value)};var h=[],p=[],d=null;return t}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t(e)}),function(t){"use strict";t("lib/makePromise",[],function(){return function(t){function e(t,e){this._handler=t===_?e:n(t)}function n(t){function e(t){o.resolve(t)}function n(t){o.reject(t)}function r(t){o.notify(t)}var o=new j;try{t(e,n,r)}catch(i){n(i)}return o}function r(t){return L(t)?t:new e(_,new w(v(t)))}function o(t){return new e(_,new w(new T(t)))}function i(){return Z}function u(){return new e(_,new j)}function c(t,e){var n=new j(t.receiver,t.join().context);return new e(_,n)}function f(t){return a(J,null,t)}function s(t,e){return a(H,t,e)}function a(t,n,r){function o(e,o,u){u.resolved||l(r,i,e,t(n,o,e),u)}function i(t,e,n){a[t]=e,0===--s&&n.become(new E(a))}for(var u,c="function"==typeof n?o:i,f=new j,s=r.length>>>0,a=new Array(s),h=0;h<r.length&&!f.resolved;++h)u=r[h],void 0!==u||h in r?l(r,c,h,u,f):--s;return 0===s&&f.become(new E(a)),new e(_,f)}function l(t,e,n,r,o){if(S(r)){var i=m(r),u=i.state();0===u?i.fold(e,n,void 0,o):u>0?e(n,i.value,o):(o.become(i),h(t,n+1,i))}else e(n,r,o)}function h(t,e,n){for(var r=e;r<t.length;++r)p(v(t[r]),n)}function p(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):0>n&&t._unreport()}}function d(t){return"object"!=typeof t||null===t?o(new TypeError("non-iterable passed to race()")):0===t.length?i():1===t.length?r(t[0]):y(t)}function y(t){var n,r,o,i=new j;for(n=0;n<t.length;++n)if(r=t[n],void 0!==r||n in t){if(o=v(r),0!==o.state()){i.become(o),h(t,n+1,o);break}o.visit(i,i.resolve,i.reject)}return new e(_,i)}function v(t){return L(t)?t._handler.join():S(t)?b(t):new E(t)}function m(t){return L(t)?t._handler.join():b(t)}function b(t){try{var e=t.then;return"function"==typeof e?new x(e,t):new E(t)}catch(n){return new T(n)}}function _(){}function g(){}function j(t,n){e.createContext(this,n),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function w(t){this.handler=t}function x(t,e){j.call(this),G.enqueue(new k(t,e,this))}function E(t){e.createContext(this),this.value=t}function T(t){e.createContext(this),this.id=++X,this.value=t,this.handled=!1,this.reported=!1,this._report()}function R(t,e){this.rejection=t,this.context=e}function q(t){this.rejection=t}function O(){return new T(new TypeError("Promise cycle"))}function C(t,e){this.continuation=t,this.handler=e}function P(t,e){this.handler=e,this.value=t}function k(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function A(t,e,n,r,o){try{t.call(e,n,r,o)}catch(i){r(i)}}function Q(t,e,n,r){this.f=t,this.z=e,this.c=n,this.to=r,this.resolver=V,this.receiver=this}function L(t){return t instanceof e}function S(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function M(t,n,r,o){return"function"!=typeof t?o.become(n):(e.enterContext(n),z(t,n.value,r,o),void e.exitContext())}function N(t,n,r,o,i){return"function"!=typeof t?i.become(r):(e.enterContext(r),F(t,n,r.value,o,i),void e.exitContext())}function U(t,n,r,o,i){return"function"!=typeof t?i.notify(n):(e.enterContext(r),W(t,n,o,i),void e.exitContext())}function H(t,e,n){try{return t(e,n)}catch(r){return o(r)}}function z(t,e,n,r){try{r.become(v(t.call(n,e)))}catch(o){r.become(new T(o))}}function F(t,e,n,r,o){try{t.call(r,e,n,o)}catch(i){o.become(new T(i))}}function W(t,e,n,r){try{r.notify(t.call(n,e))}catch(o){r.notify(o)}}function I(t,e){e.prototype=B(t.prototype),e.prototype.constructor=e}function J(t,e){return e}function K(){}function D(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(t,e){return"unhandledRejection"===t?process.emit(t,e.value,e):process.emit(t,e)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var r=!1;try{var o=new n("unhandledRejection");r=o instanceof n}catch(i){}return r?function(t,r){var o=new n(t,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!e.dispatchEvent(o)}:t}(K,self,CustomEvent):K}var G=t.scheduler,$=D(),B=Object.create||function(t){function e(){}return e.prototype=t,new e};e.resolve=r,e.reject=o,e.never=i,e._defer=u,e._handler=v,e.prototype.then=function(t,e,n){var r=this._handler,o=r.join().state();if("function"!=typeof t&&o>0||"function"!=typeof e&&0>o)return new this.constructor(_,r);var i=this._beget(),u=i._handler;return r.chain(u,r.receiver,t,e,n),i},e.prototype["catch"]=function(t){return this.then(void 0,t)},e.prototype._beget=function(){return c(this._handler,this.constructor)},e.all=f,e.race=d,e._traverse=s,e._visitRemaining=h,_.prototype.when=_.prototype.become=_.prototype.notify=_.prototype.fail=_.prototype._unreport=_.prototype._report=K,_.prototype._state=0,_.prototype.state=function(){return this._state},_.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},_.prototype.chain=function(t,e,n,r,o){this.when({resolver:t,receiver:e,fulfilled:n,rejected:r,progress:o})},_.prototype.visit=function(t,e,n,r){this.chain(V,t,e,n,r)},_.prototype.fold=function(t,e,n,r){this.when(new Q(t,e,n,r))},I(_,g),g.prototype.become=function(t){t.fail()};var V=new g;I(_,j),j.prototype._state=0,j.prototype.resolve=function(t){this.become(v(t))},j.prototype.reject=function(t){this.resolved||this.become(new T(t))},j.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=O();return t},j.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},j.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&G.enqueue(this),void 0!==this.context&&t._report(this.context))},j.prototype.when=function(t){this.resolved?G.enqueue(new C(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},j.prototype.notify=function(t){this.resolved||G.enqueue(new P(t,this))},j.prototype.fail=function(t){var e="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(e)},j.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},j.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},I(_,w),w.prototype.when=function(t){G.enqueue(new C(t,this))},w.prototype._report=function(t){this.join()._report(t)},w.prototype._unreport=function(){this.join()._unreport()},I(j,x),I(_,E),E.prototype._state=1,E.prototype.fold=function(t,e,n,r){N(t,e,this,n,r)},E.prototype.when=function(t){M(t.fulfilled,this,t.receiver,t.resolver)};var X=0;I(_,T),T.prototype._state=-1,T.prototype.fold=function(t,e,n,r){r.become(this)},T.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),M(t.rejected,this,t.receiver,t.resolver)},T.prototype._report=function(t){G.afterQueue(new R(this,t))},T.prototype._unreport=function(){this.handled||(this.handled=!0,G.afterQueue(new q(this)))},T.prototype.fail=function(t){this.reported=!0,$("unhandledRejection",this),e.onFatalRejection(this,void 0===t?this.context:t)},R.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,$("unhandledRejection",this.rejection)||e.onPotentiallyUnhandledRejection(this.rejection,this.context))},q.prototype.run=function(){this.rejection.reported&&($("rejectionHandled",this.rejection)||e.onPotentiallyUnhandledRejectionHandled(this.rejection))},e.createContext=e.enterContext=e.exitContext=e.onPotentiallyUnhandledRejection=e.onPotentiallyUnhandledRejectionHandled=e.onFatalRejection=K;var Y=new _,Z=new e(_,Y);return C.prototype.run=function(){this.handler.join().when(this.continuation)},P.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)e=t[n],U(e.progress,this.value,this.handler,e.receiver,e.resolver)},k.prototype.run=function(){function t(t){r.resolve(t)}function e(t){r.reject(t)}function n(t){r.notify(t)}var r=this.resolver;A(this._then,this.thenable,t,e,n)},Q.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},Q.prototype.rejected=function(t){this.to.reject(t)},Q.prototype.progress=function(t){this.to.notify(t)},e}})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/Scheduler",[],function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof n&&n.amd?n:function(t){module.exports=t()}),function(t){"use strict";t("lib/Promise",["require","./makePromise","./Scheduler","./env"],function(t){var e=t("./makePromise"),n=t("./Scheduler"),r=t("./env").asap;return e({scheduler:new n(r)})})}("function"==typeof n&&n.amd?n:function(t){module.exports=t(e)}),function(t){"use strict";t("when",["require","./lib/decorators/timed","./lib/decorators/array","./lib/decorators/flow","./lib/decorators/fold","./lib/decorators/inspect","./lib/decorators/iterate","./lib/decorators/progress","./lib/decorators/with","./lib/decorators/unhandledRejection","./lib/TimeoutError","./lib/Promise","./lib/apply"],function(t){function e(t,e,n,r){var o=x.resolve(t);return arguments.length<2?o:o.then(e,n,r)}function n(t){return new x(t)}function r(t){return function(){for(var e=0,n=arguments.length,r=new Array(n);n>e;++e)r[e]=arguments[e];return E(t,this,r)}}function o(t){for(var e=0,n=arguments.length-1,r=new Array(n);n>e;++e)r[e]=arguments[e+1];return E(t,this,r)}function i(){return new u}function u(){function t(t){r._handler.resolve(t)}function e(t){r._handler.reject(t)}function n(t){r._handler.notify(t)}var r=x._defer();this.promise=r,this.resolve=t,this.reject=e,this.notify=n,this.resolver={resolve:t,reject:e,notify:n}}function c(t){return t&&"function"==typeof t.then}function f(){return x.all(arguments)}function s(t){return e(t,x.all)}function a(t){return e(t,x.settle)}function l(t,n){return e(t,function(t){return x.map(t,n)})}function h(t,n){return e(t,function(t){return x.filter(t,n)})}var p=t("./lib/decorators/timed"),d=t("./lib/decorators/array"),y=t("./lib/decorators/flow"),v=t("./lib/decorators/fold"),m=t("./lib/decorators/inspect"),b=t("./lib/decorators/iterate"),_=t("./lib/decorators/progress"),g=t("./lib/decorators/with"),j=t("./lib/decorators/unhandledRejection"),w=t("./lib/TimeoutError"),x=[d,y,v,b,_,m,g,p,j].reduce(function(t,e){return e(t)},t("./lib/Promise")),E=t("./lib/apply")(x);return e.promise=n,e.resolve=x.resolve,e.reject=x.reject,e.lift=r,e["try"]=o,e.attempt=o,e.iterate=x.iterate,e.unfold=x.unfold,e.join=f,e.all=s,e.settle=a,e.any=r(x.any),e.some=r(x.some),e.race=r(x.race),e.map=l,e.filter=h,e.reduce=r(x.reduce),e.reduceRight=r(x.reduceRight),e.isPromiseLike=c,e.Promise=x,e.defer=i,e.TimeoutError=w,e})}("function"==typeof n&&n.amd?n:function(t){module.exports=t(e)}),e("when")});
//# sourceMappingURL=when.js.map